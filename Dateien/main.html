<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width = device-width, initial-scale = 1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-deep_orange.min.css">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="stylesheet" type="text/css" href="dialog-polyfill-master/dist/dialog-polyfill.css" />
    <script src="https://www.gstatic.com/firebasejs/5.8.6/firebase-app.js"></script>
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.8.6/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.8.6/firebase-auth.js"></script>
    <script src="dialog-polyfill-master/dist/dialog-polyfill.js"></script>
    <title>Haussteuerung</title>
</head>

<body>
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-drawer
            mdl-layout--fixed-header">
        <header class="mdl-layout__header">
            <div class="mdl-layout__header-row mdl-color--grey-100 mdl-color-text--grey-600">
                <span class="mdl-layout-title">Zuhause</span>
                <div class="mdl-layout-spacer"></div>
                <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable
                  mdl-textfield--floating-label mdl-textfield--align-right">
                    <label class="mdl-button mdl-js-button mdl-button--icon" for="fixed-header-drawer-exp">
                        <i class="material-icons">search</i>
                    </label>
                    <div class="mdl-textfield__expandable-holder">
                        <input class="mdl-textfield__input" type="text" name="sample" id="fixed-header-drawer-exp">
                    </div>
                </div>
                <button class="mdl-button mdl-js-button mdl-button--icon" onclick="logout()">
                    <i class="material-icons">exit_to_app</i>
                </button>
            </div>
        </header>
        <div class="mdl-layout__drawer mdl-color--blue-grey-800">
            <nav class="mdl-navigation">
                <a class="mdl-navigation__link" href="">Link</a>
                <a class="mdl-navigation__link" href="">Link</a>
                <a class="mdl-navigation__link" href="">Link</a>
                <a class="mdl-navigation__link" href="">Link</a>
            </nav>
        </div>
        <main class="mdl-layout__content">
            <div class="page-content mdl-grid">
                <dialog id="dialog" class="mdl-dialog">
                    <h3 class="mdl-dialog__title">Gerät/Aktion hinzufügen</h3>
                    <div class="mdl-dialog__content">
                        <p>
                            Hier kannst du Geräte oder Aktionen zu deinem Starbildschirm hinzufügen. Wähle dazu einfach ein Gerät aus der Liste, oder erstelle eine Aktion.
                        </p>
                    </div>
                    <div class="mdl-dialog__actions">
                        <button type="button" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">Abbrechen</button>
                        <button type="button" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--colored">Fertig</button>
                    </div>
                </dialog>
            </div>
        </main>
    </div>
    <button id="add-button" class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored mdl-color--red mdl-js-ripple-effect dialog-button">
        <i class="material-icons md-light">add</i>
    </button>
</body></html>
<script>
    // Initialize Firebase
    var config = {
        apiKey: "AIzaSyA-mbg9CvX0bvQX8KCGEnz6wq-O82f1C9k",
        authDomain: "smart-home-a5e0f.firebaseapp.com",
        databaseURL: "https://smart-home-a5e0f.firebaseio.com",
        projectId: "smart-home-a5e0f",
        storageBucket: "smart-home-a5e0f.appspot.com",
        messagingSenderId: "413738318134"
    };
    firebase.initializeApp(config);

    //Variables
    var database = firebase.database();

    firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
            // User is signed in.
            var displayName = user.displayName;
            var email = user.email;
            var emailVerified = user.emailVerified;
            var photoURL = user.photoURL;
            var isAnonymous = user.isAnonymous;
            var uid = user.uid;
            var providerData = user.providerData;
            console.log("success");
        } else {
            window.location.href = "../index.html"
            console.log("failed");
        }
    });

    function logout() {
        firebase.auth().signOut().then(function() {
        }, function(error) {
            console.log("error");
        });
    }

    var lampStatus = firebase.database().ref('lamp-tv-right/status');
    lampStatus.on('value', function(snapshot) {
        console.log(snapshot.val());
    });

    (function() {
    'use strict';
    var dialogButton = document.querySelector('.dialog-button');
    var dialog = document.querySelector('#dialog');
    if (! dialog.showModal) {
      dialogPolyfill.registerDialog(dialog);
    }
    dialogButton.addEventListener('click', function() {
       dialog.showModal();
    });
    dialog.querySelector('button:not([disabled])')
    .addEventListener('click', function() {
      dialog.close();
    });
  }());
</script>
